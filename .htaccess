# Licita.pub - Root .htaccess
# Redireciona requisições para a estrutura correta

RewriteEngine On
RewriteBase /

# Força HTTPS (descomente se já tiver SSL configurado)
# RewriteCond %{HTTPS} off
# RewriteRule ^(.*)$ https://%{HTTP_HOST}%{REQUEST_URI} [L,R=301]

# IMPORTANTE: Permitir acesso direto a arquivos e diretórios existentes
# Esta regra DEVE vir ANTES dos redirecionamentos
RewriteCond %{REQUEST_FILENAME} -f [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^ - [L]

# Redirecionar /api/* para /backend/public/api/*
RewriteCond %{REQUEST_URI} ^/api/(.*)$
RewriteRule ^api/(.*)$ backend/public/api/$1 [L,QSA]

# Redirecionar raiz para index.php do backend/public
RewriteRule ^$ backend/public/index.php [L]

# Redirecionar outras requisições (exceto frontend/ e backend/) para backend/public
RewriteCond %{REQUEST_URI} !^/frontend/
RewriteCond %{REQUEST_URI} !^/backend/
RewriteRule ^(.*)$ backend/public/$1 [L,QSA]
